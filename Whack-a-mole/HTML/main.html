<!doctype html>
<html lang="no">
    <head>
        <title>Whack-a-mole</title>

        <link rel="stylesheet" href="../CSS/stylesheet.css">

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <h1>Whack-a-mole</h1>

        <div id="Game">
            <h2 id="GameRules">Whack <input type="number" placeholder="10"> moles to win!</h2>

            <div id="imgRow1">
            <img src="../Pictures/placeholderimg_empty.png" class="moleImage" alt="Image for mole" id="img_1"> <img src="../Pictures/placeholderimg_empty.png" class="moleImage" alt="Image for mole" id="img_2"> <img src="../Pictures/placeholderimg_empty.png" class="moleImage" alt="Image for mole" id="img_3">
            </div>
            <div id="imgRow2">
            <img src="../Pictures/placeholderimg_empty.png" class="moleImage" alt="Image for mole" id="img_4"> <img src="../Pictures/placeholderimg_empty.png" class="moleImage" alt="Image for mole" id="img_5"> <img src="../Pictures/placeholderimg_empty.png" class="moleImage" alt="Image for mole" id="img_6">
            </div>
            <div id="imgRow2">
            <img src="../Pictures/placeholderimg_empty.png" class="moleImage" alt="Image for mole" id="img_7"> <img src="../Pictures/placeholderimg_empty.png" class="moleImage" alt="Image for mole" id="img_8"> <img src="../Pictures/placeholderimg_empty.png" class="moleImage" alt="Image for mole" id="img_9">
            </div>

            <h2 id="ScoreCounter">Score: 0</h2>
            <button id="RestartButton"><h3>Restart Game</h3></button>
        </div>
    </body>
    <script>
        const img = [document.getElementById("img_1"), document.getElementById("img_2"), document.getElementById("img_3"), document.getElementById("img_4"), document.getElementById("img_5"), document.getElementById("img_6"), document.getElementById("img_7"), document.getElementById("img_8"), document.getElementById("img_9")];
        img[0].addEventListener("click", ClickedOne);
        img[1].addEventListener("click", ClickedTwo);
        img[2].addEventListener("click", ClickedThree);
        img[3].addEventListener("click", ClickedFour);
        img[4].addEventListener("click", ClickedFive);
        img[5].addEventListener("click", ClickedSix);
        img[6].addEventListener("click", ClickedSeven);
        img[7].addEventListener("click", ClickedEight);
        img[8].addEventListener("click", ClickedNine);

        const emptyImage = "../Pictures/placeholderimg_empty.png";
        const moleImage = "../Pictures/placeholderimg_mole.png";

        imgIsMole = [false, false, false, false, false, false, false, false, false];

        const scoreText = document.getElementById("ScoreCounter");
        let playerScore = 0;

        const restartButton = document.getElementById("RestartButton");
        restartButton.addEventListener("click", RestartGame);

        const winScoreInput = document.querySelector("input");
        winScoreInput.addEventListener("change", UpdateWinScoreCondition);
        let winScore = winScoreInput.placeholder;

        let gameover = false;

        setInterval(AddMole, 1200);

        setInterval(RemoveMoles, 2000);

        function ClickedOne() {
            if(!gameover) {
                if(imgIsMole[0] ==  true) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }

            img[0].src = emptyImage;
        }
        function ClickedTwo() {
            if(!gameover) {
                if(imgIsMole[1] ==  true) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }

            img[1].src = emptyImage;
        }
        function ClickedThree() {
            if(!gameover) {
                if(imgIsMole[2] ==  true) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }

            img[2].src = emptyImage;
        }
        function ClickedFour() {
            if(!gameover) {
                if(imgIsMole[3] ==  true) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }

            img[3].src = emptyImage;
        }
        function ClickedFive() {
            if(!gameover) {
                if(imgIsMole[4] ==  true) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }

            img[4].src = emptyImage;
        }
        function ClickedSix() {
            if(!gameover) {
                if(imgIsMole[5] ==  true) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }

            img[5].src = emptyImage;
        }
        function ClickedSeven() {
            if(!gameover) {
                if(imgIsMole[6] ==  true) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }

            img[6].src = emptyImage;
        }
        function ClickedEight() {
            if(!gameover) {
                if(imgIsMole[7] ==  true) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }
            
            img[7].src = emptyImage;
        }
        function ClickedNine() {
            if(!gameover) {
                if(imgIsMole[8] ==  true) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }

            img[8].src = emptyImage;
        }

        function PlusPlayerScore() {
            playerScore++;

            scoreText.innerHTML = "Score: " + playerScore;

            if(playerScore >= winScore) {
                gameover = true;

                scoreText.innerHTML = "Your score reached " + winScore + ", and you won the game! Press the reset button to play again";
            }
        }
        function MinusPlayerScore() {
            if(!gameover) {
                playerScore--;
                
                scoreText.innerHTML = "Score: " + playerScore;
            }
        }

        function UpdateWinScoreCondition() {
            if(winScoreInput.value != '') {
                winScore = Number(winScoreInput.value);
            }
            else {
                winScore = winScoreInput.placeholder;
            }
        }

        function BetweenRounds() {
            timeoutLive = false;
        }

        function RestartGame() {
            gameover = false;

            playerScore = 0;

            scoreText.innerHTML = "Score: 0";

            setTimeout(AddMole, 1000);

            console.log("game restarted");
        }

        function AddMole() {
            if(!gameover) {
                let chosenMole = Math.floor(Math.random() * 9);

                img[chosenMole].src = moleImage;

                imgIsMole[chosenMole] = true;
            }
        }

        function RemoveMoles() {
            for(let i = 0; i < img.length; i++) {
                img[i].src = emptyImage;

                imgIsMole[i] = false;
            }

            console.log("moles emptied")
        }
    </script>
</html>