<!doctype html>
<html>
    <head>
        <title>Whack-a-mole</title>

        <link rel="stylesheet" href="../CSS/stylesheet.css">
    </head>
    <body>
        <h1>Whack-a-mole</h1>

        <div id="Game">
            <h2 id="GameRules">Whack <input type="number" placeholder="5"> moles to win!</h2>

            <img src="placeholderimg_empty" alt="" id="img_1"> <img src="placeholderimg_empty" alt="" id="img_2"> <img src="placeholderimg_empty" alt="" id="img_3">
            <img src="placeholderimg_empty" alt="" id="img_4"> <img src="placeholderimg_empty" alt="" id="img_5"> <img src="placeholderimg_empty" alt="" id="img_6">
            <img src="placeholderimg_empty" alt="" id="img_7"> <img src="placeholderimg_empty" alt="" id="img_8"> <img src="placeholderimg_empty" alt="" id="img_9">

            <h2 id="ScoreCounter">Score: 0</h2>
            <button id="RestartButton"><h3>Restart Game</h3></button>
        </div>
    </body>
    <script>
        const winScoreInput = document.querySelector("input");
        winScoreInput.addEventListener("change", UpdateWinScoreCondition);

        const img = [document.getElementById("img_1"), document.getElementById("img_2"), document.getElementById("img_3"), document.getElementById("img_4"), document.getElementById("img_5"), document.getElementById("img_6"), document.getElementById("img_7"), document.getElementById("img_8"), document.getElementById("img_9")];
        img[0].addEventListener("click", ClickedOne);
        img[1].addEventListener("click", ClickedTwo);
        img[2].addEventListener("click", ClickedThree);
        img[3].addEventListener("click", ClickedFour);
        img[4].addEventListener("click", ClickedFive);
        img[5].addEventListener("click", ClickedSix);
        img[6].addEventListener("click", ClickedSeven);
        img[7].addEventListener("click", ClickedEight);
        img[8].addEventListener("click", ClickedNine);

        const scoreText = document.getElementById("ScoreCounter");

        const restartButton = document.getElementById("RestartButton");
        restartButton.addEventListener("click", RestartGame);

        let winScore = 5;

        let playerScore;

        const emptyImage = "placeholdeimg_empty";

        const moleImage = "placeholderimg_mole";

        let gameover = false;

        function ClickedOne() {
            if(!gameover) {
                if(img_.src == moleImage) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }
        }
        function ClickedTwo() {
            if(!gameover) {
                if(img_.src == moleImage) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }
        }
        function ClickedThree() {
            if(!gameover) {
                if(img_.src == moleImage) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }
        }
        function ClickedFour() {
            if(!gameover) {
                if(img_.src == moleImage) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }
        }
        function ClickedFive() {
            if(!gameover) {
                if(img_.src == moleImage) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }
        }
        function ClickedSix() {
            if(!gameover) {
                if(img_.src == moleImage) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }
        }
        function ClickedSeven() {
            if(!timeoutLive && !gameover) {
                if(img_.src == moleImage) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }
        }
        function ClickedEight() {
            if(!gameover) {
                if(img_.src == moleImage) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }
        }
        function ClickedNine() {
            if(!gameover) {
                if(img_.src == moleImage) {
                    PlusPlayerScore();
                }
                else {
                    MinusPlayerScore();
                }
            }
        }

        function PlusPlayerScore() {
            playerScore++;

            scoreText.innerHTML = "Score: " + playerScore;

            if(playerScore >= winScore) {
                gameover = true;

                scoreText.innerHTML = "Your score reached " + winScore + ", and you won the game! Press the reset button to play again";
            }
            timeoutLive = true;
        }
        function MinusPlayerScore() {
            playerScore--;

            scoreText.innerHTML = "Score: " + playerScore;

            timeoutLive = true;
        }

        function UpdateWinScoreCondition() {
            if(winScoreInput.value != '') {
                winScore = winScoreInput.value;
            }
            else {
                winScore = 5;
            }
        }

        function BetweenRounds() {
            timeoutLive = false;
        }

        function RestartGame() {
            gameover = false;

            scoreText.innerHTML = "Score: 0";
        }

        function AddMole() {
            let chosenMole = Math.floor(Math.random() * 9);

            img[chosenMole].src = moleImage
        }
    </script>
</html>